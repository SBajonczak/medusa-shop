import{u as g}from"./chunk-6CNRNROJ-Dwie2T1Q.js";import{C as j}from"./chunk-W6N53UNG-0UnlDtE0.js";import{K as P}from"./chunk-6HTZNHPT-3-lwbP-z.js";import{b as i,u as b}from"./chunk-AYRG2MQL-YqvrAt84.js";import{P as _}from"./chunk-ZVVQK46Y-DyC4Lwd_.js";import{R as y,b as m,Q as S,j as s,H as C,a8 as v,U as F,t as h,v as n,B as u,ab as E,s as T,a1 as D,a3 as L}from"./index-CXOwuGYo.js";import"./x-mark-mini-COfrev7H.js";import"./triangles-mini-8WnZw7zb.js";import"./plus-mini-kqhqcrwq.js";import"./prompt-f7mTD0rZ.js";var N=D({shipping_profile_id:L()}),R=({product:l})=>{var d;const{t:r}=m(),{handleSuccess:p}=b(),o=g({queryKey:["shipping_profiles"],queryFn:e=>T.admin.shippingProfile.list(e),getOptions:e=>e.shipping_profiles.map(a=>({label:a.name,value:a.id}))}),t=v({defaultValues:{shipping_profile_id:((d=l.shipping_profile)==null?void 0:d.id)??""},resolver:E(N)}),{mutateAsync:c,isPending:f}=F(l.id),x=t.handleSubmit(async e=>{await c({shipping_profile_id:e.shipping_profile_id},{onSuccess:({product:a})=>{h.success(r("products.shippingProfile.edit.toasts.success",{title:a.title})),p()},onError:a=>{h.error(a.message)}})});return s.jsx(i.Form,{form:t,children:s.jsxs(P,{onSubmit:x,className:"flex h-full flex-col",children:[s.jsx(i.Body,{children:s.jsx("div",{className:"flex h-full flex-col gap-y-4",children:s.jsx(n.Field,{control:t.control,name:"shipping_profile_id",render:({field:e})=>s.jsxs(n.Item,{children:[s.jsx(n.Label,{children:r("products.fields.shipping_profile.label")}),s.jsx(n.Control,{children:s.jsx(j,{...e,options:o.options,searchValue:o.searchValue,onSearchValueChange:o.onSearchValueChange,fetchNextPage:o.fetchNextPage})}),s.jsx(n.ErrorMessage,{})]})})})}),s.jsx(i.Footer,{children:s.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[s.jsx(i.Close,{asChild:!0,children:s.jsx(u,{size:"small",variant:"secondary",children:r("actions.cancel")})}),s.jsx(u,{size:"small",type:"submit",isLoading:f,children:r("actions.save")})]})})]})})},M=()=>{const{id:l}=y(),{t:r}=m(),{product:p,isLoading:o,isError:t,error:c}=S(l,{fields:_});if(t)throw c;return s.jsxs(i,{children:[s.jsx(i.Header,{children:s.jsx(i.Title,{asChild:!0,children:s.jsx(C,{children:r("products.shippingProfile.edit.header")})})}),!o&&p&&s.jsx(R,{product:p})]})};export{M as Component};
